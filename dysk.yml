---
  
- name: Wykrywanie dyskow
  set_fact:
    dyski: "{{ dyski | default([]) + [ item.key ] }}"
  no_log: True  
  with_dict: "{{ hostvars[inventory_hostname].ansible_devices }}"
  when: item.value.sectors != "0" and item.value.removable == "0" and item.value.host != ""

- name: WYKRYTE DYSKI
  debug:
    var: dyski

- pause:
    prompt: "PODAJ DYSK Z {{ dyski | list }}"
    echo: yes
  register: result
  when: dyski | length > 1
  

- set_fact:
    dysk: "{{result.user_input }}"
  when: dyski | length > 1
  

- set_fact:
    dysk: "{{ dyski[0] }}"
  when: dyski | length == 1

- debug:
    var: dysk



- inport_tasks: efi.yml
  when: dysk | regex_search('nvm') 

- inport_tasks: legacy.yml
  when: dysk | regex_search('sd') 

